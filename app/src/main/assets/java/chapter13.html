<!DOCTYPE html>
<html>
<head>
    <title>第十四章 Swing桌面程序开发 - 邠心工作室</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <link href="css/main.css" rel="stylesheet" />
    <script src="Script/shCore.js" type="text/javascript"></script>
    <script src="Script/shBrushJava.js" type="text/javascript"></script>
    <link href="css/shCoreDefault.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
</head>
<body>
    <div class="div">
        <blockquote>
            Swing是一门开发桌面程序的技术。在本章中同学们将学到如何开发界面程序，这要比前面学习的程序有意思的多。在本章中将对Swing的知识按从浅到深的顺序依次进行讲解。同学们通过本章的学习，应该完成如下几个目标。
            <ol>
                <li>了解Swing开发的基本过程。</li>
                <li>掌握如何创建窗口、面板、标签和按钮。</li>
                <li>掌握和熟练使用Swing中的事件。</li>
            </ol>
        </blockquote>
        <h3>14.1  开发第一个Swing程序</h3>
        <p>在本节中首先使用一个简单的程序，让同学们知道什么是Swing程序，以及Swing程序的功能。在该程序中有很多知识是以前没有介绍过的，在后面的学习中将详细的分析各个地方。</p>
        <p class="exap">【范例】示例代码是一个简单的Swing程序。</p>
        <pre class="brush:java">import javax.swing.*; //导入Swing包
//继承JFrame类
public class Swing1 extends JFrame
{
	//定义构造器
	public Swing1()
	{
		this.setLayout(null); //设置布局管理器
		JLabel jl=new JLabel(); //定义一个标签
		jl.setText("第一个Swing程序"); //设置显示的文字
		jl.setBounds(50,50,400,50); //设置标签的大小和位置
		this.add(jl); //将标签放到窗口中
		this.setBounds(300,250,500,200); //设置窗口的大小和位置
		this.setVisible(true); //设置窗口是可见的
	}
	public static void main(String args[])
	{
		Swing1 s=new Swing1();
	}
}</pre>
        <p>第一次看到该程序可能会觉得很复杂，其实其中都是很基础的内容，在以后的Swing程序中也会重复使用。在该程序中，首先要导入Swing包，然后继承该包中的JFrame类，使用该类才能使运行结果出现界面的形式。在程序中需要定义一个构造器，在构造器中首先要设置布局管理器，该程序没有使用布局管理器，布局管理器的知识会在后面用一章的内容来进行讲解。然后就是定义了一个用于显示文字的标签。在最后还需要设置窗口的大小和位置，以及可见性。</p>
        <p>从第一个Swing程序可以看出，运行结果不再是以前在黑屏中显示信息，而是在界面中显示信息。这里的信息不只包括文字信息，也包括以后将要学到的一些组件信息。</p>
        <h3>14.2  JFrame窗口类</h3>
        <p>在Swing程序中，窗口是一个容器，在该容器中可以放其他一些组件。学习JFrame窗口类是学习其他组件的基础。在Swing程序中创建窗口可以使用继承JFrame类来完成。</p>
        <h4>14.2.1  JFrame窗口类简介</h4>
        <p>在开发的Swing程序中，通常是通过继承JFrame窗口类来实现窗口的。在该类中具有很多很有用的方法，包括定义窗口标题、标框，以及窗口的大小和位置。在介绍这些方法之前，先来介绍一下JFrame窗口类的构造器。JFrame窗口类具有四种构造器。</p>
        <p>最常用的JFrame窗口类的构造器是无参构造器，使用该构造器将创建一个初始不可见的新窗体。除此之外还有具有一个String类参数的构造器，使用该构造器能够在初始时就创建一个具有标题的新窗体。还有两种需要给出图形配置参数的构造器，这两种构造器在本教程中不进行介绍。</p>
        <p>创建新窗口后，就可以通过JFrame窗口类的方法来设置新窗口。首先使用无参构造器创建的是一个不可见的新窗体，所以要使用方法来将窗体设置为可见的形式。在JFrame窗口类中定义了一个setVisible方法来设置窗口的可见性，该方法具有一个布尔型参数，true表示可见，false表示不可见。将初始状态下的窗口设置为不可见是有原因的，因为有很多对窗口的操作需要在窗口不可见的状态下执行，从而setVisible方法通过在程序的最后执行。</p>
        <p>在JFrame窗口类中有个setTitle方法，该方法需要一个字符型参数。使用setTitle方法可以设置窗口的名称；还有一个setBounds方法，该方法具有4个参数，前两个参数分别表示窗口位置的横坐标和纵坐标，后两个参数分别表示窗口大小的宽度和高度。JFrame窗口类最重要的方法就是add方法，使用该方法可以将组件添加到窗口中。这些都是比较常用的JFrame窗口类的方法。</p>
        <h4>14.2.2  创建简单窗体</h4>
        <p>通过前面对JFrame窗口类的学习，可以来创建一个简单的窗体。创建窗体有两种方法，先来介绍第一种方法，可以直接使用JFrame窗口类的构造器来创建一个简单的窗体。</p>
        <p class="exap">【范例】示例代码是一个直接使用JFrame窗口类创建简单窗体的程序。</p>
        <pre class="brush:java">import javax.swing.*; //导入Swing包
public class Swing2
{
	public static void main(String args[])
	{
		JFrame jf=new JFrame();			//创建JFrame类构造器
		jf.setTitle("直接使用JFrame窗口类");//设置窗口的名称
		jf.setBounds(300,250,300,200);		//设置窗口的大小和位置
		jf.setVisible(true);				//设置窗口可见性
	}
}
</pre>
        <p>在本程序中直接使用JFrame窗口类来创建一个窗体。首先创建一个JFrame类对象，然后调用JFrame类中的方法。在本程序中使用setTitle方法来设置窗口的名称，使用setBounds方法来设置窗口的大小和位置，使用setVisible方法来设置窗口的可见性。这种方法只是创建一个简单窗口时需要的，如果创建一个复杂的窗口，使用这种方法就会使程序变的非常复杂难理解。</p>
        <h4>14.2.3  设置窗体</h4>
        <p>除了上一小节中学习的在创建窗体时必要的设置窗体的方法外，还有一些设置窗体的方法。例如setResizable方法，使用该方法可以设置创建的窗口是否可以调整大小。默认状态下窗体是能够调整大小的，也就是setResizable方法的默认值为true。</p>
        <p class="error">注意：默认状态下窗体是能够调整大小的，也就是setResizable方法的默认值为true。</p>
        <p class="exap">【范例】示例代码是一个设置窗体不能被调整大小的程序。</p>
        <pre class="brush:java">import javax.swing.*;						//导入Swing包
//继承JFrame类
public class Swing4 extends JFrame
{
	//定义构造器
	public Swing4()
	{
		this.setTitle("通过继承创建窗口");//设置窗口标题
		this.setBounds(300,250,300,200);	//设置窗口的大小和位置
		this.setResizable(false);			//设置窗口不能被调整大小
		this.setVisible(true);				//设置窗口是可见的
	}
	public static void main(String args[])
	{
		Swing4 s=new Swing4();
	}
}</pre>
        <p>有些同学们会认为该结果是和上面程序的运行结果图一样的，其实不然。该运行结果中的窗体是不能最大化的，这主要是由于在程序中使用setResizable方法的参数为false，使得窗口不能调整大小，从而也就使窗口不能最大化。如果试图通过鼠标来调整大小，也是不能成功的。</p>
        <p class="exap">提示：在JFrame窗口类中还有一个setUndecorated方法，使用该方法可以将窗体的边框和标题栏去掉。</p>
        <p>在JFrame窗口类中还有一个很重要的方法，那就是setDefaultCloseOperation方法。使用该方法可以设置当单击关闭按钮关闭窗口时所执行的动作。这里的动作包括4种情况，分别对应着4个常量。</p>
        <table class="table">
            <tr>
                <td>DO_NOTHING_ON_CLOSE</td>
                <td>不执行任何动作</td>
            </tr>
            <tr>
                <td>DISPOSE_ON_CLOSE</td>
                <td>释放窗体对象</td>
            </tr>
            <tr>
                <td>HIDE_ON_CLOSE</td>
                <td>隐藏窗体</td>
            </tr>
            <tr>
                <td>EXIT_ON_CLOSE</td>
                <td>退出JVM</td>
            </tr>
        </table>
        <p class="error">提示：如果不使用setDefaultCloseOperation方法进行设置，默认值为HIDE_ON_CLOSE，也就是在默认情况下单击关闭按钮将会使窗口隐藏。</p>
        <h3>14.3  JPanel面板类</h3>
        <p>在上一节中讲解的JFrame窗口类是一个容器类，从本小节开始来讲解一些控件。首先要讲解的就是JPanel面板类。面板可以说是控件，但它同样是一种容器，只不过它不是顶层容器。所以在本节中就要先了解一下什么是容器，然后再介绍JPanel面板类。</p>
        <h4>14.3.1  容器介绍</h4>
        <p>Swing中的控件可以分为三类，顶层容器、非顶层容器和普通控件。在前面介绍的JFrame窗口类就是一个顶层容器。顶层容器是一种可以直接显示在系统桌面上的控件，其他控件必须直接或者间接的借助顶层容器进行显示。顶层容器除了包括JFrame窗口类外，还包括JWindow和JDialog等不常用的类。</p>
        <p>在本节中将介绍的JPanel面板类是一个非顶级容器，非顶级容器是具有两面性的。非顶级容器是要放到顶级容器中使用的，对于顶级容器来说，非顶级容器是一般控件。在非顶级容器中还可以添加控件，对于这些控件来看，非顶级容器就是一个容器。</p>
        <p>普通控件在控件中占大部分，使用这些控件可以实现特定的功能，但它们不具有容器的作用，它们只能放在容器中进行显示。普通控件包括按钮、文本框等很多控件。</p>
        <p>有些同学们会认为将普通控件直接放到顶级容器中不也可以完成显示功能吗？这种说法在语法上是正确的，但是正确不一定是合理的。这种设计将会使程序变的非常复杂，而且难以维护。通常在设计界面时，都会先定义顶级容器，然后向顶级容器中添加非顶级容器，而将普通控件放在非顶级容器中。</p>
        <p>这种设计的好处就是使程序开发变得简单，在开发时开发员在某一时间内只需要关注某一个非顶级容器界面的编写，最后将所有的非顶级容器添加到顶级容器中。这种设计还有一个好处就是，程序具有重用性，因为有可能在多个界面中使用同一个非顶级容器程序，这样就可以重复使用该程序。</p>
        <h4>14.3.2  JPanel面板类简介</h4>
        <p>JPanel面板类是一个非顶级容器，使用JPanel面板类可以搭建一个子界面。JPanel面板类同样具有四种构造器，最常用的仍然是无参构造器。使用有参构造器可以在初始时设置面板采用什么布局管理器和是否使用双缓冲。</p>
        <p>JPanel面板类本身没有特殊功能，它的作用就是作为非顶级容器来添加普通控件，搭建子界面。所以JPanel面板类的方法也是很少很简单的。首先JPanel面板类具有一个添加控件的add方法，使用该方法能够将普通控件添加到面板中。getHeight方法和getWidth方法分别是返回当前面板的高度和宽度。</p>
        <p class="exap">提示：JPanel面板类还有一个setToolTipText方法，该方法具有一个字符串参数，该方法的作用主要是当鼠标指针停留在面板上时显示文本，字符串内容就是要显示的内容。</p>
        <h4>14.3.3  创建面板</h4>
        <p>在前面的学习中已经知道，面板必须添加到窗口中，而面板中还可以添加普通的控件。在本节中就来学习如何创建面板，和如何进行添加操作。</p>
        <p class="exap">【范例】示例代码是一个创建面板的程序。</p>
        <pre class="brush:java">import javax.swing.*; //导入Swing包
//继承JFrame类
public class Swing7 extends JFrame
{
	JPanel jp=new JPanel();	//创建一个面板
	JButton jb=new JButton("按钮");	//创建一个按钮
	//定义构造器
	public Swing7()
	{
		this.setTitle("创建面板");	//设置窗口名称
		jp.add(jb);					//将按钮添加到面板中
		this.add(jp);				//将面板添加到窗口中
		this.setBounds(300,250,300,200);//设置窗口的大小和位置
		this.setVisible(true);			//设置窗口是可见的
	}
	public static void main(String args[])
	{
		Swing7 s=new Swing7();
	}
}</pre>
        <p>在本程序中是一个创建面板的程序。在示例代码中的第5行创建了一个面板，在第12行是让窗体调用add方法将该面板添加到窗体中。在第6行是创建的一个按钮，在第11行将该按钮添加到面板中。有些同学们可能会有疑问了，在运行结果中只有一个按钮，怎么没有看到面板。这是因为面板不是普通的控件，它是一个放置控件的容器，所以它是不显示的。</p>
        <h3>14.4  JLabel标签类</h3>
        <p>标签是Swing中最基本的控件，它是一种非交互的控件，也就是不需要进行操作的控件。标签虽然通常只起到一个显示功能，但是它是界面编程中必不可少的。使用标签能够给用户提供更多的相关信息。</p>
        <h4>14.4.1  JLabel标签类简介</h4>
        <p>JLabel标签类的知识点要比前面所学到的JPanel面板类的知识点多很多。首先JLabel标签类具有六个构造器来创建标签，下表中列出了这六种构造器。</p>
        <img src="http://vbe.tutc.cc:8081/xml/image/201805182141.jpg" />
        <p>使用表中的标签类构造器都能够创建标签，其中最常见的还是无参构造器。</p>
        <p>JLabel标签类的方法有很多，这些方法都是对应的形式，分别是获取和设置方法。这里给出一些比较常用的方法，其中setText方法已经在前面的学习中使用过，表示设置标签要显示的文本。同时和这个方法相对应的就是getText方法，使用该方法来获取标签显示的文本。除了这两个方法外，还有对图像、对齐方式等进行操作的方法，这些在以后的学习中使用时将进行讲解。</p>
        <h4>14.4.2  创建标签</h4>
        <p>学习完了JLabel标签类后，创建标签就是很容易的问题。</p>
        <p class="exap">【范例】示例代码是一个创建标签的程序。</p>
        <pre class="brush:java">import javax.swing.*; //导入Swing包
//继承JFrame类
public class Swing8 extends JFrame
{
	JLabel jl=new JLabel();				//创建一个标签
	//定义构造器
	public Swing8()
	{
		this.setTitle("创建标签");			//设置窗口名称
		jl.setText("这是一个标签");			//设置标签显示的内容
		jl.setVerticalAlignment(JLabel.CENTER);//设置标签垂直居中
		jl.setHorizontalAlignment(JLabel.CENTER);//设置标签水平居中
		this.add(jl);					//将标签添加到窗口中
		this.setBounds(300,250,300,200);	//设置窗口的大小和位置
		this.setVisible(true);				//设置窗口是可见的
	}
	public static void main(String args[])
	{
		Swing8 s=new Swing8();
	}
} </pre>
        <p>其中第5行使用JLabel标签类的无参构造器创建了一个标签。在第10行使用setText方法设置标签上要显示的内容。在第11行使用setVerticalAlignment方法设置标签在容器中垂直居中。在第12行使用setHorizontalAlignment方法设置标签在容器中水平居中。在第13行将该标签添加到窗口中。在该程序中为了使程序简单，就直接将标签放在窗体中，而没有再定义非顶级容器。</p>
        <h3>14.5  JButton按钮类</h3>
        <p>为了更好地学习下一章的布局管理器，在本章中也介绍一个Swing中最常见的控件，那就是按钮。按钮是进行交互操作使用最多的控件，同时按钮也是相对简单的控件。在下一章中学习布局管理器时，将使用按钮来进行举例说明，所以该节也是学习布局管理器的基础。</p>
        <h4>14.5.1  JButton按钮类简介</h4>
        <p>使用JBuntton按钮类可以创建最常用的按钮控件。JButton按钮类同样具有多个构造器，使用这些构造器都能够创建按钮控件。最常用的仍然是使用无参构造器来创建一个不带文本和图标的按钮。</p>
        <p>在JButton按钮类中具有几个很常用的方法。其中setText方法是来设置按钮上显示的文本，和其对应的是用getText方法来获取按钮上显示的文本。在JButton按钮类中还有一个经常被使用，也是非常有意思的setMnemonic方法，使用该方法可以设置按钮的助记符。助记符就是使用键盘中的Alt加该助记符就能起到相应的功能。例如在Word中，使用Alt+F就能打开文件菜单。为按钮添加助记符后就可以使用Alt加该助记符来代替单击按钮的操作。</p>
        <p class="exap">提示：助记符就是使用键盘中的Alt加该助记符就能起到相应的功能。</p>
        <h4>14.5.2  创建按钮</h4>
        <p>学习完了JButton按钮类后，创建按钮就是很容易的问题。</p>
        <p class="exap">【范例】示例代码是一个创建按钮的程序。</p>
        <pre class="brush:java">import javax.swing.*; //导入Swing包
//继承JFrame类
public class Swing9 extends JFrame
{
	JButton jb=new JButton();	//创建一个按钮
	//定义构造器
	public Swing9()
	{
		this.setTitle("创建按钮");	//设置窗口名称
		jb.setText("这是一个按钮");	//设置按钮上显示的内容
		jb.setMnemonic('a');		//设置按钮的助记符
		this.add(jb);				//将按钮添加到窗口中
		this.setBounds(300,250,300,200);//设置窗口的大小和位置
		this.setVisible(true);			//设置窗口是可见的
	}
	public static void main(String args[])
	{
		Swing9 s=new Swing9();
	}
}</pre>
        <p>在该程序的第5行使用空构造器创建了一个按钮。在第10行使用setText方法设置了按钮上显示的内容。在第11行使用setMnemonic方法设置了按钮的助记符。在窗口中单击，可以看出是该界面中是一个按钮，同样使用Alt+A同样能起到单击按钮的作用。有些同学们可能会感到奇怪，为什么整个窗口中就只有这一个按钮，而且占满整个窗口。这个问题在学完下一章就会明白是怎么回事。</p>
        <h4>14.5.3  按钮动作事件</h4>
        <p>按钮是具有动作事件的，单击按钮时触发动作事件，也就是ActionEvent事件。但是如果想让按钮在触发事件后执行程序，就需要为按钮添加动作事件监听器，并且需要为按钮注册动作事件监听器。编写动作事件监听器是通过实现ActionListener监听接口来完成的。</p>
        <p>在ActionListener监听接口中只有一个actionPerformed方法，所以在动作事件监听器中只需要实现这一个方法。将触发事件后将执行的程序都写在actionPerformed方法中。定义完监听器后，还需要向按钮注册该监听器，注册监听器是通过addActionListener方法来实现的。</p>
        <h3>14.6  Swing中的事件</h3>
        <p>虽然在对按钮的讲解中已经对事件进行了使用，但是还是有必要对事件进行一个总体的讲解。对于一个界面程序来说，如果只能显示一些控件，这是完全不能满足功能要求的。通过事件的使用，就可以使界面具有更加丰富的功能。</p>
        <h4>14.6.1  事件简介</h4>
        <p>事件是一种很好的让界面和用户进行交互的手段。当用户和界面交互时，经常会进行一些操作，例如单击按钮，按下指定键盘键，都会触发事件。事件触发后会告诉程序发生的事件，程序会根据不同的事件来做出响应。在事件的发生和响应的过程中需要两个对象，事件源和事件监听器。</p>
        <p>事件源就是触发事件的控件，这里包括按钮、文本框、窗体等很多种控件。但是不同的控件是存在不同的事件的，事件信息被封装在事件对象中。事件监听器是指实现专门的监听接口的类的对象。每一个事件都有对应的监听接口，同时在该接口中给出了处理事件的方法。在编写监听器时需要事件监听接口，同时实现其中的方法，在方法中编写触发事件后执行的程序。在编写程序时，还需要将监听器注册给事件源，这样才能执行事件。</p>
        <p class="exap">提示：事件源和监听器之间是多对多的关系，一个事件源可以对应多个监听器，一个监听器可以为多个事件源服务，这在后面将会给出具体的程序进行讲解。</p>
        <h4>14.6.2  同一个事件源注册多个监听器</h4>
        <p>同一个事件源可以同时注册多个监听器，这种情况下触发事件，所有的监听器都将执行事件方法，对事件进行处理。</p>
        <p>当为同一个事件源注册多个监听器时，监听器的执行顺序并不是先注册先执行的顺序，而是先注册后执行的顺序来执行的。同学们可以写一个程序来演示这一点。</p>
        <h4>14.6.3  同一个监听器注册给多个事件源</h4>
        <p>同一个监听器注册给多个事件源的情况下，所有的事件源中的任意一个触发事件都会通知监听器，并执行监听器中的事件处理方法。</p>
        <p>将一个监听器注册给多个事件源，从而不管是单击哪一个按钮，都将执行监听器方法。为了辨别是哪一个按钮被按下，在监听器方法中需要判断是哪一个按钮触发了事件，执行的效果是使另一个按钮的显示内容发生变化。</p>
        <h4>14.6.4  窗体获取和失去焦点事件</h4>
        <p>在Swing中，针对窗体的事件有很多，但是这些事件都是很容易理解的。窗体中的所有事件都是使用WindowEvent类来表示。在本节中就先来介绍窗体获取和失去焦点事件，该事件是通过实现WindowFocusListener监听接口实现的。</p>
        <h4>14.6.5  窗体打开、关闭和激活事件</h4>
        <p>要实现窗体打开、关闭和激活事件只需要实现WindowListener监听接口的监听器。WindowListener监听接口中同样具有很几种方法，这里还是通过程序来讲解这些方法。</p>
        <h3>14.7  综合练习</h3>
        <span>1.开发一个同一个事件源注册多个监听器的程序。</span>
        <pre class="brush:java">public class LianXi1
{
    JButton jb=new JButton(); //创建一个按钮
    int i=0; //定义一个表示按下次数的变量
    //定义构造器
    public LianXi1()
    {
    	this.setTitle("创建按钮"); //设置窗口名称
		jb.setText("按钮按下了0次"); //设置按钮上显示的内容
		jb.setMnemonic('a'); //设置按钮的助记符
		this.add(jb); //将按钮添加到窗口中
        //为按钮注册监听器
    	jb.addActionListener(new ActionListener()
        {
            //触发动作事件时，执行的方法
            public void actionPerformed(ActionEvent e)
            {
                LianXi1.this.jb.setText("按钮按下了"+(++i)+"次");
            }
        });
        //为按钮注册第二个监听器
        jb.addActionListener(new ActionListener()
        {
            //触发动作事件时，执行的方法
            public void actionPerformed(ActionEvent e)
            {
                LianXi1.this.jb.setText("按钮按下了"+(++i)+"次");
            }
        });
        this.setBounds(300,250,300,200); //设置窗口的大小和位置
        this.setVisible(true); //设置窗口是可见的
    }

    public static void main(String args[])
    {
    	LianXi1 s=new LianXi1();
    }
}</pre>
        <h3>14.8  小结</h3>
        <p>本章是对Java中Swing程序入门的章，在本章中只是对界面开发作了一个简单的介绍。在本章中首先介绍了如何进行界面开发，然后分别介绍了窗口类、面板类、标签类和按钮类。在本章的最后对界面开发中非常重要的事件开发进行了讲解。</p>
    </div>
</body>
</html>
